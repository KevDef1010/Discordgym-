// Prisma Schema Erweiterung für Chat
model ChatMessage {
  id          String      @id @default(cuid())
  content     String
  senderId    String
  receiverId  String?     // Für private Messages
  chatRoomId  String?     // Für Gruppen Chat
  messageType MessageType @default(TEXT)
  createdAt   DateTime    @default(now())
  isRead      Boolean     @default(false)
  isEdited    Boolean     @default(false)
  
  sender     User      @relation("MessageSender", fields: [senderId], references: [id])
  receiver   User?     @relation("MessageReceiver", fields: [receiverId], references: [id])
  chatRoom   ChatRoom? @relation(fields: [chatRoomId], references: [id])
}

model ChatRoom {
  id        String   @id @default(cuid())
  name      String
  isGroup   Boolean  @default(false)
  createdAt DateTime @default(now())
  
  messages ChatMessage[]
  members  ChatRoomMember[]
}

enum MessageType {
  TEXT
  IMAGE
  FILE
  SYSTEM
}
